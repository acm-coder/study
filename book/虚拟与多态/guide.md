# 导读

本书在章节的启承转合上有密切的配合，所以并不建议你做跳跃式阅读。从第一页循序看到最后一页，是我以为比较好的方式。当然如果你对于某些主题十分熟稔，可以快速掠过进入下一主题。

## 读者基础

你需要一些 C++ 语言基础，以及程序设计领域的某种程度的经验。这种经验很难加以量化，你可试着找出本书各主题中你最感兴趣或最有心得的一部份，试阅 3~5 页。如果读来可喜，有所领悟，就带回家去吧。

## 章节划分

本书共分六章：

- 第 1 章 Classes 语法和语义

  本章所有内容都围绕着 C++ classes 打转。本章对 C++ Classes 的重要性质做了一个梗概描述，算是搭起你（读者）和我（作者）之间的共识。这些 C++ 语法和语意大部份都是后续章节需要用到的。小部份虽然与后续章节无关，却是（译注：原文这里缺失）

- 第 2 章 C++ 对象模型（C++ Object Model）

  C++ 对象模型的技术涵盖范围很广，本章只挑选和“多态与虚拟”有关的两大主题：（1）对象实体的布局，（2）虚拟机制的底层架构（vptr 和 vtbl）。这一章可以为你扎下非常好的底层基础，使你在面对一个虚拟函数时，清楚知道它如何被调用、它的额外负担是什么、以及为什么能够靠它达到多态的终极目标。

- 第 3 章 类型转换（Type Casting）

  一旦引入多态，对象指标就必须考虑 type-safe 的问题。本章介绍 C++ 的三个转型运 算子，并把焦点放在和 RTTI 有关的 dynamic_cast 运算子身上。本章也介绍了 C/C++ Standard 的 # 和 ## 运算子（或者你可以称它们为编译器前置处理器），帮助我们利 用巨集让编译器为我们「写程序」。 # 和 ## 这两个运算子在第五章的程序实例中扮演 重要角色。

- 第4 章 为什么需要多态（Why Polymorphism）

  本章利用一个小例子，解说虚拟函数带来的影响，以及多态（polymorphism）的无远弗届，以及泛型（generalization）的重要性。本书前三章著重于本职学能的建立，这一章则开始进入逻辑层次的思考阶段。

- 第 5 章 Polymorphism 的应用

  这一章以一个大型实例为主轴，一方面验证虚拟和多态的应用，一方面又以程序设计来弥补目前任何 C++ 编译器都未曾提供的两个面向对象重要特质：Dynamic Creation 和 Persistence。本章代码取材自 MFC 源码，再经我的删减修饰而成，适用于任何操作系统，非常具有参考价值，对于 C++ programming 技术可以带来开阔的眼界。

- 第 6 章 从 C++ Object Model 迈向 Component Object Model

  C++ 有其可到之处，有其不可到之处。为了能够跨编译平台、跨语言平台、跨操作系统、跨网路传输，有必要把 C++ 语言层面的封装更进一步设计为二进制层面的封装。 Component Object Model（COM）就是这种思想下所制定的一个规范，而了解 C++ Object Model 正是学习 Component Object Model 的最短路径。本章以三个实例逐次完成封装工作，使 C++ classes 成为所谓的 components，亦即所谓的“软件 IC”。

## 使用工具

理论上，任何一个 C++ 编译器，都可以编译本书的任何一个程序。即使第五章那个脱胎自 Microsoft Foundation Classes（MFC）的大型实例，经过我的修改，一样可通过各家编译器。我的实验平台包括 Visual C++ 和 Borland C++Builder 两套 C++ 编译器。

前三章介绍各种语法或各种低阶实验性动作时，常会连带把测试动作的编译错误信息列出（如果有的话）。我所列的是 Microsoft Visual C++ 的错误信息和代码。

目前 PC 上任何一套 C++ 编译器都提供有继承开发环境（IDE）以及命令行（command line）两种模式。本书第 2 章 p.150 和第 5 章 p.233 分别示范在 Visual C++ 之下如何设定并使用这两种模式。

## 源代码

第 5 章和第 6 章的示例程序，比较大也比较值得提供给读者。我把它放在松岗出版公司的网站上（http://www.unalis.com.tw），请自行下载。至于分散本书各处的小小测试程序，非常多，非常小，非常细琐，并不打算供应给读者。

## 用词特色

C++ 以及面向对象领域中的一个特色就是，有着多如牛毛的术语，而且又臭又长。我决定尽量采用原文术语，目的有二：

1. 我清楚知道工程师们的习惯用语，我不想让他们看这本书时，时时得把中文名词倒译回去，或时时得查阅中英名词对照表。
2. 学子们对于原文术语的陌生度已经到了令我骇然的地步。我希望起一些引导作用。

当然，中英名词的取舍与选择，程度上的拿捏是很需要技巧的，而选择是很带个人色彩 的。欢迎您给我意见，谢谢。

侯俊杰 1998.07.02 于新竹

jjhou@ccca.nctu.edu.tw